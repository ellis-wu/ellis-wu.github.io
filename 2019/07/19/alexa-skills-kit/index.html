<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>Alexa Skills Kit 新手教學 | Ellis&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Amazon 於 2014 年推出了 Alexa 智慧語音助手，就目前來說 Alexa 應該已經是家喻戶曉的東西了。透過 Amazon Echo 搭配 Alexa 就能讓冷冰冰的機器能與使用者對話，而要做到這樣的事情在其背後是需要龐大的架構來支撐的。在整個 Alexa 生態系中有兩個重要的東西，第一個是 Alexa Voice Service (AVS)，它是讓機器與人溝通重要的中樞神經，所有接收">
<meta name="keywords" content="Amazon,Alexa">
<meta property="og:type" content="article">
<meta property="og:title" content="Alexa Skills Kit 新手教學">
<meta property="og:url" content="http://ellis-wu.github.io/2019/07/19/alexa-skills-kit/index.html">
<meta property="og:site_name" content="Ellis&#39;s Blog">
<meta property="og:description" content="Amazon 於 2014 年推出了 Alexa 智慧語音助手，就目前來說 Alexa 應該已經是家喻戶曉的東西了。透過 Amazon Echo 搭配 Alexa 就能讓冷冰冰的機器能與使用者對話，而要做到這樣的事情在其背後是需要龐大的架構來支撐的。在整個 Alexa 生態系中有兩個重要的東西，第一個是 Alexa Voice Service (AVS)，它是讓機器與人溝通重要的中樞神經，所有接收">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://ellis-wu.github.io/images/alexa-skills-kit-images/alexa-skills-kit-logo.png">
<meta property="og:updated_time" content="2019-08-16T06:14:25.989Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Alexa Skills Kit 新手教學">
<meta name="twitter:description" content="Amazon 於 2014 年推出了 Alexa 智慧語音助手，就目前來說 Alexa 應該已經是家喻戶曉的東西了。透過 Amazon Echo 搭配 Alexa 就能讓冷冰冰的機器能與使用者對話，而要做到這樣的事情在其背後是需要龐大的架構來支撐的。在整個 Alexa 生態系中有兩個重要的東西，第一個是 Alexa Voice Service (AVS)，它是讓機器與人溝通重要的中樞神經，所有接收">
<meta name="twitter:image" content="http://ellis-wu.github.io/images/alexa-skills-kit-images/alexa-skills-kit-logo.png">
    

    

    
        <link rel="icon" href="/css/images/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Ellis&#39;s Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">Ellis Wu</h2>
            <h3 id="title">軟體工程師</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Taipei, Taiwan</span>
            <a id="follow" target="_blank" href="https://github.com/ellis-wu/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                21
                <span>posts</span>
            </div>
            <div class="article-info-block">
                32
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/ellis-wu" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.facebook.com/imelliswu" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/in/%E8%B1%90%E5%90%8D-%E5%90%B3-3280a2135/" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-alexa-skills-kit" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            
	
		<img src="/images/alexa-skills-kit-images/alexa-skills-kit-logo.png" class="article-banner" />
	



        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Alexa Skills Kit 新手教學
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2019/07/19/alexa-skills-kit/">
            <time datetime="2019-07-18T16:00:00.000Z" itemprop="datePublished">2019-07-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技術/">技術</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技術/AWS/">AWS</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Alexa/">Alexa</a>, <a class="tag-link" href="/tags/Amazon/">Amazon</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p>Amazon 於 2014 年推出了 Alexa 智慧語音助手，就目前來說 Alexa 應該已經是家喻戶曉的東西了。透過 Amazon Echo 搭配 Alexa 就能讓冷冰冰的機器能與使用者對話，而要做到這樣的事情在其背後是需要龐大的架構來支撐的。在整個 Alexa 生態系中有兩個重要的東西，第一個是 Alexa Voice Service (AVS)，它是讓機器與人溝通重要的中樞神經，所有接收到的語音檔案都會傳至 AVS 加以解析並判斷，再回覆給使用者。第二個是 Alexa Skills Kit (ASK)，它是讓人能有客製化的語音命令，透過 ASK 能控制設備或更多的功能 (像是訂購 pizza 等)，藉由 ASK 來強壯整個 Alexa 的生態系。所以，本文會先簡單介紹 AVS 與 ASK，在以一個簡單的教學說明如何客製化一個自己的技能。</p>
<a id="more"></a>
<h2 id="什麼是-AVS？"><a href="#什麼是-AVS？" class="headerlink" title="什麼是 AVS？"></a>什麼是 AVS？</h2><p>首先，我們要先了解何謂 Alexa Voice Service (AVS)，這是使用者每對 Echo 說話時，都一定會用到的服務。如下圖所示，Echo 不斷的偵測，並且在接收到喚醒詞 Alexa 後，開始將喚醒詞後面的語音 What time is it 傳送至 AVS。而 AVS 接收到語音串流後，會將語音轉文字，並加以分析該語音的意思，最終 AVS 將文字結果回覆給 Echo 並由 Echo 將文字給說出來。<br><img src="/images/alexa-skills-kit-images/avs-overview.png" alt="Alexa Voice Service Overview"></p>
<h2 id="ASK-與-AVS"><a href="#ASK-與-AVS" class="headerlink" title="ASK 與 AVS"></a>ASK 與 AVS</h2><p>可能大家會開始思考，那我要控制家裡的家電 Alexa 是又如何能明白家中的裝置與開關。這是 Amazon 提供了 ASK 讓大家能客製化自己的語音命令以達到控制家電或者查詢特定資料等功能。<br><img src="/images/alexa-skills-kit-images/ask-overview.png" alt="Alexa Skills Kit Overview"></p>
<p>如上圖所示。是一個客製化技能與 AVS 之間的流程。假設使用者對家中 Echo 說<strong>「Alexa, tell Myskill Open door」</strong>，其語音串流與資料流如下：</p>
<ol>
<li>Echo 不停偵測 Alexa 這個喚醒詞，當接收到後喚醒 Alexa 將喚醒詞後面語音串流傳送至 AVS。</li>
<li>AVS 將語音串流進行辨識並將其轉為文字，轉文字後再將其切割成<strong>要被激活的應用</strong><code>Invocation</code> (此例為 Myskill) 以及其他已被辨識為文字的<strong>命令句</strong><code>Intent</code> (此例為 Open door)。</li>
<li>AVS 根據<code>Invocation</code>找到對應的客製化技能內所設定的範例詞彙 (sample utterances) 進行比對，若符合則觸發該<code>Intent</code>。</li>
<li>AWS Lambda 會事先定義好各個<code>Intent</code>被觸發時要執行的事件，所以步驟 3 觸發的<code>Intent</code>就會執行 Lambda 中對應的事情。</li>
<li>最後將處理結果與回覆的語音等等回傳至 AVS，而其中語音部分會被 Echo 播出。</li>
</ol>
<p>以上大概是一個客製化技能的流程。而要出發該客製化技能有<strong>對話形式</strong>與<strong>命令形式</strong>兩種形式，差異如下圖。<br><img src="/images/alexa-skills-kit-images/ask-commands.png" alt="Alexa Skills Kit Command"></p>
<p>有了一些基本的了解後，讓我們開始建立一個自己的 Alexa 客製化技能吧!</p>
<h2 id="建立自己的-Alexa-Skill"><a href="#建立自己的-Alexa-Skill" class="headerlink" title="建立自己的 Alexa Skill"></a>建立自己的 Alexa Skill</h2><p>首先，打開瀏覽器並存取 <a href="https://developer.amazon.com/alexa" target="_blank" rel="noopener">Alexa</a> 網頁。登入後，上方導航列選擇 <strong>[Alexa]</strong> 再選擇 <strong>[Alexa Skill Kit]</strong> 進入 Alexa Skills Kit (ASK) 的 console 頁面。<br><img src="/images/alexa-skills-kit-images/go-ask-console.png" alt="Go to ASK Console"></p>
<p>接著，我們點選右邊的 <strong>[Create Skill]</strong> 按鈕來建立自己的 Alexa Skill。<br><img src="/images/alexa-skills-kit-images/create-alexa-skill.png" alt="Create Alexa Skill"></p>
<p>第一件事情當然是要輸入 Skill 的名稱，而這個名稱最後會是你在 Alexa Store 上的名稱。<br><img src="/images/alexa-skills-kit-images/alexa-skill-name.png" alt="Alexa Skill Name"></p>
<p>選擇 Alexa Skill 的模板，每個模板在設定與使用上都有不同，所以這邊請依照自己情境選擇最合適的。而這邊為範例所以選擇 <strong>[Custom]</strong>。<br><img src="/images/alexa-skills-kit-images/alexa-skill-model.png" alt="Alexa Skill Modle"></p>
<p>Alexa Skill 都需要一個 backend，讓語音命令執行時告訴它應該要做什麼事情。而目前 Alexa 提供了 <strong>Provision your own</strong> 與 <strong>Alexa-Hosted</strong> 兩種方式。而這邊為範例所以選擇 <strong>[Alexa-Hosted]</strong>。<br><img src="/images/alexa-skills-kit-images/alexa-skill-backend-hosted.png" alt="Alexa Skill Backend Hosted"></p>
<p>確認資訊都沒問題後，就可以點選上方的 <strong>[Create Skill]</strong> 按鈕。而這邊需要等它一下，讓它建立聲音模型與建立 backend 等事情。<br><img src="/images/alexa-skills-kit-images/alexa-skill-create.png" alt="Create Alexa Skill"></p>
<p>完成後，就會看到類似以下的畫面。<br><img src="/images/alexa-skills-kit-images/alexa-skill-setting.png" alt="Alexa Skill Setting"></p>
<p>可以看到畫面的左邊的 <strong>Interaction Model</strong>，這是整個 Skill 最重要部分，Alexa Skill 的觸發與執行的命令都會在這邊。因此，我們先來設定 Alexa Skill 觸發的語音，點選左邊的 <strong>[Invocation]</strong>。可以看到它都有一些說明，若設定的 <strong>Skill Invocation Name</strong> 為 myskill 時，使用者對家中的 Alexa 設備說 “Alexa, ask myskill balalala…”，這樣才能觸發這個技能並叫它做對應的事情。<br><img src="/images/alexa-skills-kit-images/alexa-skill-invaction.png" alt="Alexa Skill Invaction"></p>
<p>輸入完 <strong>[Skill Invocation Name]</strong> 後，記得點選上方的 <strong>[Sava Model]</strong>。</p>
<p>接下來要設定執行的語音指令。這邊我們自己建立一個新的 Intent。點選左邊 Intent 的 <strong>[Add]</strong> 按鈕。輸入 <strong>[Create custom intent]</strong> 的名稱。輸入完後，點選 <strong>[Create custom intent]</strong> 按鈕。<br><img src="/images/alexa-skills-kit-images/alexa-skill-intent-name.png" alt="Alexa Skill Intent Name"></p>
<blockquote class="colorquote info"><p>若當初建立 Skill 時選擇 <strong>Alexa-Hosted</strong> 這邊會幫你自己建立<code>HelloWorldIntent</code>。</p>
</blockquote>
<p>再來設定這個 Inent 的 Sample Utterances 來觸發這個 Intent。<br><img src="/images/alexa-skills-kit-images/alexa-skill-sample-utterances.png" alt="Alexs Skill Sample Utterances"></p>
<p>若如上圖設定，則代表我們說出的命令如下：</p>
<ul>
<li>Alexa, ask myskill open the door</li>
<li>Alexa, ask myskill open door</li>
<li>Alexa, ask myskill door open</li>
</ul>
<p>設定完成後一樣記得點選上方的 <strong>[Save Model]</strong>。到這邊我們基本的設定已大致完成，這時候點選旁邊的 <strong>[Build Model]</strong> 來建立 Invocation 與 Intent 的模型。</p>
<p>訓練完成後，要對新加入的 Intent 來寫一點程式讓它觸發這個 Intent 時要回覆語音。在上方導航列點選 <strong>[Code]</strong>。</p>
<blockquote class="colorquote warning"><p>若當初有選 <strong>[Alexa-Hosted]</strong>，在 <strong>Code</strong> 這邊才會自己建立 Lambda 程式。若沒有選擇，則要自己透過 Amazon Lambda 來建立程式碼，並將 Lambda 與這個 Skill 連結。</p>
</blockquote>
<p><strong>Code</strong> 中的 Lambda 程式如下，這邊可以很清楚看到程式碼定義了每個 request 與 intent 要做的事情或回覆的語音。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This sample demonstrates handling intents from an Alexa skill using the Alexa Skills Kit SDK (v2).</span></span><br><span class="line"><span class="comment">// Please visit https://alexa.design/cookbook for additional examples on implementing slots, dialog management,</span></span><br><span class="line"><span class="comment">// session persistence, api calls, and more.</span></span><br><span class="line"><span class="keyword">const</span> Alexa = <span class="built_in">require</span>(<span class="string">'ask-sdk-core'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LaunchRequestHandler = &#123;</span><br><span class="line">    canHandle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">return</span> Alexa.getRequestType(handlerInput.requestEnvelope) === <span class="string">'LaunchRequest'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">const</span> speakOutput = <span class="string">'Welcome, you can say Hello or Help. Which would you like to try?'</span>;</span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder</span><br><span class="line">            .speak(speakOutput)</span><br><span class="line">            .reprompt(speakOutput)</span><br><span class="line">            .getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> HelloWorldIntentHandler = &#123;</span><br><span class="line">    canHandle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">return</span> Alexa.getRequestType(handlerInput.requestEnvelope) === <span class="string">'IntentRequest'</span></span><br><span class="line">            &amp;&amp; Alexa.getIntentName(handlerInput.requestEnvelope) === <span class="string">'HelloWorldIntent'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">const</span> speakOutput = <span class="string">'Hello World!'</span>;</span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder</span><br><span class="line">            .speak(speakOutput)</span><br><span class="line">            <span class="comment">//.reprompt('add a reprompt if you want to keep the session open for the user to respond')</span></span><br><span class="line">            .getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> HelpIntentHandler = &#123;</span><br><span class="line">    canHandle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">return</span> Alexa.getRequestType(handlerInput.requestEnvelope) === <span class="string">'IntentRequest'</span></span><br><span class="line">            &amp;&amp; Alexa.getIntentName(handlerInput.requestEnvelope) === <span class="string">'AMAZON.HelpIntent'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">const</span> speakOutput = <span class="string">'You can say hello to me! How can I help?'</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder</span><br><span class="line">            .speak(speakOutput)</span><br><span class="line">            .reprompt(speakOutput)</span><br><span class="line">            .getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> CancelAndStopIntentHandler = &#123;</span><br><span class="line">    canHandle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">return</span> Alexa.getRequestType(handlerInput.requestEnvelope) === <span class="string">'IntentRequest'</span></span><br><span class="line">            &amp;&amp; (Alexa.getIntentName(handlerInput.requestEnvelope) === <span class="string">'AMAZON.CancelIntent'</span></span><br><span class="line">                || Alexa.getIntentName(handlerInput.requestEnvelope) === <span class="string">'AMAZON.StopIntent'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">const</span> speakOutput = <span class="string">'Goodbye!'</span>;</span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder</span><br><span class="line">            .speak(speakOutput)</span><br><span class="line">            .getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> SessionEndedRequestHandler = &#123;</span><br><span class="line">    canHandle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">return</span> Alexa.getRequestType(handlerInput.requestEnvelope) === <span class="string">'SessionEndedRequest'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput) &#123;</span><br><span class="line">        <span class="comment">// Any cleanup logic goes here.</span></span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder.getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The intent reflector is used for interaction model testing and debugging.</span></span><br><span class="line"><span class="comment">// It will simply repeat the intent the user said. You can create custom handlers</span></span><br><span class="line"><span class="comment">// for your intents by defining them above, then also adding them to the request</span></span><br><span class="line"><span class="comment">// handler chain below.</span></span><br><span class="line"><span class="keyword">const</span> IntentReflectorHandler = &#123;</span><br><span class="line">    canHandle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">return</span> Alexa.getRequestType(handlerInput.requestEnvelope) === <span class="string">'IntentRequest'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">const</span> intentName = Alexa.getIntentName(handlerInput.requestEnvelope);</span><br><span class="line">        <span class="keyword">const</span> speakOutput = <span class="string">`You just triggered <span class="subst">$&#123;intentName&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder</span><br><span class="line">            .speak(speakOutput)</span><br><span class="line">            <span class="comment">//.reprompt('add a reprompt if you want to keep the session open for the user to respond')</span></span><br><span class="line">            .getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generic error handling to capture any syntax or routing errors. If you receive an error</span></span><br><span class="line"><span class="comment">// stating the request handler chain is not found, you have not implemented a handler for</span></span><br><span class="line"><span class="comment">// the intent being invoked or included it in the skill builder below.</span></span><br><span class="line"><span class="keyword">const</span> ErrorHandler = &#123;</span><br><span class="line">    canHandle() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput, error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`~~~~ Error handled: <span class="subst">$&#123;error.stack&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">const</span> speakOutput = <span class="string">`Sorry, I had trouble doing what you asked. Please try again.`</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder</span><br><span class="line">            .speak(speakOutput)</span><br><span class="line">            .reprompt(speakOutput)</span><br><span class="line">            .getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The SkillBuilder acts as the entry point for your skill, routing all request and response</span></span><br><span class="line"><span class="comment">// payloads to the handlers above. Make sure any new handlers or interceptors you've</span></span><br><span class="line"><span class="comment">// defined are included below. The order matters - they're processed top to bottom.</span></span><br><span class="line">exports.handler = Alexa.SkillBuilders.custom()</span><br><span class="line">    .addRequestHandlers(</span><br><span class="line">        LaunchRequestHandler,</span><br><span class="line">        HelloWorldIntentHandler,</span><br><span class="line">        HelpIntentHandler,</span><br><span class="line">        CancelAndStopIntentHandler,</span><br><span class="line">        SessionEndedRequestHandler,</span><br><span class="line">        IntentReflectorHandler, <span class="comment">// make sure IntentReflectorHandler is last so it doesn't override your custom intent handlers</span></span><br><span class="line">    )</span><br><span class="line">    .addErrorHandlers(</span><br><span class="line">        ErrorHandler,</span><br><span class="line">    )</span><br><span class="line">    .lambda();</span><br></pre></td></tr></table></figure></p>
<p>我們剛建立了一個 Intent，也需要在這段程式碼中加入 Handler 讓 Intent 被出發時做出相對應的事情：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">const</span> DoorIntentHandler = &#123;</span><br><span class="line">    canHandle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">return</span> Alexa.getRequestType(handlerInput.requestEnvelope) === <span class="string">'IntentRequest'</span></span><br><span class="line">            &amp;&amp; Alexa.getIntentName(handlerInput.requestEnvelope) === <span class="string">'Door'</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    handle(handlerInput) &#123;</span><br><span class="line">        <span class="keyword">const</span> speakOutput = <span class="string">'Door Open!'</span>;</span><br><span class="line">        <span class="keyword">return</span> handlerInput.responseBuilder</span><br><span class="line">            .speak(speakOutput)</span><br><span class="line">            .getResponse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">exports.handler = Alexa.SkillBuilders.custom()</span><br><span class="line">    .addRequestHandlers(</span><br><span class="line">        LaunchRequestHandler,</span><br><span class="line">        HelloWorldIntentHandler,</span><br><span class="line">        DoorIntentHandler, <span class="comment">// 加入這行剛剛加上的 Handler</span></span><br><span class="line">        HelpIntentHandler,</span><br><span class="line">        CancelAndStopIntentHandler,</span><br><span class="line">        SessionEndedRequestHandler,</span><br><span class="line">        IntentReflectorHandler,</span><br><span class="line">    )</span><br><span class="line">    .addErrorHandlers(</span><br><span class="line">        ErrorHandler,</span><br><span class="line">    )</span><br><span class="line">    .lambda();</span><br></pre></td></tr></table></figure></p>
<p>完成後，點擊上方 <strong>[Save]</strong> 並且 <strong>[Deploy]</strong>。</p>
<h2 id="測試-Alexa-Skill"><a href="#測試-Alexa-Skill" class="headerlink" title="測試 Alexa Skill"></a>測試 Alexa Skill</h2><p>部署完成後，點選上方導航列的 <strong>Test</strong>，並且將 <strong>[Skill testing is enabled in]</strong> 切換成 <strong>Development</strong>。接著，我們就可以在下方輸入框輸入想說的話來測試 Skill。</p>
<p><img src="/images/alexa-skills-kit-images/alexa-skill-test.png" alt="Test Alexa Skill"></p>
<p>可以看到有如預期的回覆，這樣一個簡單的客製化 Alexa Skill 大功告成！</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://ellis-wu.github.io/2019/07/19/alexa-skills-kit/" data-id="cjzhqe3zi0007f12nyb7x0gm0" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://ellis-wu.github.io/2019/07/19/alexa-skills-kit/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://ellis-wu.github.io/2019/07/19/alexa-skills-kit/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2019/07/22/ask-with-auth0/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    Alexa Skill 結合 Auth0
                
            </div>
        </a>
    
    
        <a href="/2019/07/17/avs-device-sdk-wwe/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">更換 AVS Device SDK 的喚醒詞</div>
        </a>
    
</nav>


    
</article>


    
    
        <section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>
    



</section>
            
                
<aside id="sidebar">
    
        
    <div id="toc" class="toc-article">
        <strong class="toc-title">Catalogue</strong>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#什麼是-AVS？"><span class="toc-number">1.</span> <span class="toc-text">什麼是 AVS？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ASK-與-AVS"><span class="toc-number">2.</span> <span class="toc-text">ASK 與 AVS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立自己的-Alexa-Skill"><span class="toc-number">3.</span> <span class="toc-text">建立自己的 Alexa Skill</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#測試-Alexa-Skill"><span class="toc-number">4.</span> <span class="toc-text">測試 Alexa Skill</span></a></li></ol>
    </div>


    
    
    <a id="toTop" href="#top" class=""></a>
</aside>

 
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2019 Ellis Wu<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'http://ellis-wu.github.io/2019/07/19/alexa-skills-kit/';
        
        this.page.identifier = 'alexa-skills-kit';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'elliswu-blog' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
